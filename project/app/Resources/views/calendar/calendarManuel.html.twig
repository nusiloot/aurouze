{% set _menu_active = 'calendar' %}
{% extends 'base.html.twig' %}
{% block body %}
    <div id="wrapper">
    	<div id="container">
    		<div class="row" style="padding-bottom: 10px;">
				<div id="fc-events" class="col-sm-12"></div>
                <div class="col-sm-12 hidden" id="retour_technicien_btn" ></div>
                <br/>
			</div>
    		<ul class="nav nav-tabs" role="tablist" style="margin-bottom: 15px; font-size: 13px;">
				{% if passage %}
					<li role="presentation"{% if not technicien %} class="active"{% endif %}><a href="{{ path('calendarManuel',{'passage': passage.passageIdentifiant()}) }}" role="tab" style="color: black;"><strong>Tous</strong></a></li>
				{% else %}
                    <li role="presentation"{% if not technicien %} class="active"{% endif %}><a href="{{ path('calendarManuel') }}" role="tab" style="color: black;"><strong>Tous</strong></a></li>
                {% endif %}
            	{% set i=0 %}
				{% for tech in techniciens  if i < 8 %}
                <li role="presentation"{% if tech == technicien %} class="active"{% endif %}>
                    {% if passage %}
                    <a href="{{ path('calendar',{'passage': passage.passageIdentifiant(), 'technicien': tech}) }}" role="tab" style="color: {{ colors[i+1] }};"><strong>{{ tech }}</strong></a>
                    {% else %}
                    <a href="{{ path('calendar',{'technicien': tech}) }}" role="tab" style="color: {{ colors[i+1] }};"><strong>{{ tech }}</strong></a>
                    {% endif %}
                </li>
                {% set i=loop.index %}
		    	{% endfor %}
		    </ul>
    		<div class="row">
				<div class="col-sm-12">
					<div class="fc fc-ltr fc-unthemed">
						<div class="fc-view-container">
							<div class="fc-view fc-agendaWeek-view fc-agenda-view">
								<table>
									<thead class="fc-head">
										<tr>
											<td class="fc-head-container fc-widget-header">
												<div class="fc-row fc-widget-header">
													<table>
														<thead>
															<tr>
																<th class="fc-axis fc-widget-header" style="width: 17px;"></th>
																<th data-date="2016-02-29" class="fc-day-header fc-widget-header fc-mon">lun. 29/2</th>
																<th data-date="2016-03-01" class="fc-day-header fc-widget-header fc-tue">mar. 1/3</th>
																<th data-date="2016-03-02" class="fc-day-header fc-widget-header fc-wed">mer. 2/3</th>
																<th data-date="2016-03-03" class="fc-day-header fc-widget-header fc-thu">jeu. 3/3</th>
																<th data-date="2016-03-04" class="fc-day-header fc-widget-header fc-fri">ven. 4/3</th>
																<th data-date="2016-03-05" class="fc-day-header fc-widget-header fc-sat">sam. 5/3</th>
															</tr>
														</thead>
													</table>
												</div>
											</td>
										</tr>
									</thead>
									<tbody class="fc-body">
										<tr>
											<td class="fc-widget-content">
												<div class="fc-time-grid-container" style="height: 530px; overflow: hidden;">
													<div class="fc-time-grid">
														<div class="fc-bg">
															<table>
																<tbody>
																	<tr>
																		<td class="fc-axis fc-widget-content" style="width: 17px;"></td>
																		<td data-date="2016-02-29" class="fc-day fc-widget-content fc-mon fc-past"></td>
																		<td data-date="2016-03-01" class="fc-day fc-widget-content fc-tue fc-past"></td>
																		<td data-date="2016-03-02" class="fc-day fc-widget-content fc-wed fc-past"></td>
																		<td data-date="2016-03-03" class="fc-day fc-widget-content fc-thu fc-today fc-state-highlight"></td>
																		<td data-date="2016-03-04" class="fc-day fc-widget-content fc-fri fc-future"></td>
																		<td data-date="2016-03-05" class="fc-day fc-widget-content fc-sat fc-future"></td>
																	</tr>
																</tbody>
															</table>
														</div>
														<div class="fc-slats">
															<table>
																<tbody>
																	{% for i in 6..18 %}
																		<tr data-time="{{ "%02d:00:00"|format(i) }}">
																			<td class="fc-axis fc-time fc-widget-content" style="width: 17px;"><span>{{ "%02d"|format(i) }}</span></td>
																			<td class="fc-widget-content"></td>
																		</tr>
																		<tr class="fc-minor" data-time="{{ "%02d:30:00"|format(i) }}">
																			<td class="fc-axis fc-time fc-widget-content" style="width: 17px;"></td>
																			<td class="fc-widget-content"></td>
																		</tr>
																    {% endfor %}
																</tbody>
															</table>
														</div>
														<div class="fc-content-skeleton">
															<table>
																<tbody>
																	<tr>
																		<td style="width:17px" class="fc-axis"></td>
																		{% for date, eventDate in eventsDates %}
																		<td class="{{ date }}">
																			<div class="fc-content-col">
																				<div class="fc-event-container">
																					{% set index = 0 %}
																					{% for technicien, events in eventDate %}
																						{% for event in events %}
																						<a style="
																							background-color: {{ event.backgroundColor }}; 
																							color: {{ event.textColor }}; 
																							z-index: {{ index }}; 
																							top: {{ event.coefStart * 22}}px; 
																							bottom: -{{ event.coefEnd * 22}}px; 
																							left: {{ ((100 / nbTechniciens) * index)|round(0, 'floor') }}%; 
																							width: {{ ((100 / nbTechniciens))|round(0, 'floor') }}%;" 
																							class="fc-time-grid-event fc-v-event fc-event fc-start fc-end">
																						</a>
																						{% endfor %}
																						{% set index = index + 1 %}
																					{% endfor %}
																				</div>
																			</div>
																		</td>
																		{% endfor %}
																	</tr>
																</tbody>
															</table>
														</div>
														<hr class="fc-divider fc-widget-header" style="display: block;">
													</div>
												</div>
											</td>
										</tr>
									</tbody>	
								</table>
							</div>
						</div>	
					</div>
				</div>
			</div>	
		</div>	
    </div>
{% endblock %}					
										
										
										
										
										
										