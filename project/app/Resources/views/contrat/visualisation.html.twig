{% set _menu_active = 'contrat' %}
{% extends 'base.html.twig' %}

{% block title %}Contrat n°{{ contrat.numeroArchive }} {{ societe.raisonSociale }}{% endblock title %}
{% block body %}
    <ol class="breadcrumb" style="margin-bottom: 0;">
        <li><a href="{{ path('contrat') }}">Contrat</a></li>
        <li><a href="{{ path('contrats_societe',{ 'id' : societe.id }) }}">&nbsp;{{ societe.raisonSociale }}&nbsp;<small>{{societe.adresse.intitule }}</small></a></li>
        <li><a href="{{ path('contrat_modification',{ 'id' : contrat.id }) }}">&nbsp;Contrat&nbsp;{{ contrat.numeroArchive }}</a></li>
    </ol>
    <div class="row">
        <div class="col-xs-8">
            <h1>Contrat {{ contrat.getStatutLibelleLong }}&nbsp;<small>n° {{ contrat.getNumeroArchive() }}</small></h1>
        </div>
        {%  if (contrat.isModifiable()) %}
            <div class="col-xs-4 text-right" style="padding-top: 30px; ">
                <div class="btn-group">
                    {%  if (contrat.isReconductible) %}
                        <a href="{{ path('contrat_reconduction', {'id': contrat.getId()}) }}" class="btn btn-sm btn-info" onclick="return confirm('Êtes-vous sûre de vouloir reconduire le contrat n° '+{{ contrat.numeroArchive }}+'?');">Reconduire</a>
                    {% endif %}
                    {%  if (contrat.isAnnulable()) %}
                        <a href="{{ path('contrat_annulation', {'id': contrat.getId()}) }}" class="btn btn-sm btn-danger" onclick="return confirm('Êtes-vous sûre de vouloir annuler le contrat n° '+{{ contrat.numeroArchive }}+'?');">Annuler</a>
                    {%  endif %}
                    {%  if (contrat.isEnAttenteAcceptation() or contrat.isBrouillon()) %}
                        <a href="{{ path('contrat_suppression', {'id': contrat.getId()}) }}" class="btn btn-sm btn-danger" onclick="return confirm('Êtes-vous sûre de vouloir supprimer le contrat n° '+{{ contrat.numeroArchive }}+'?');"><span class="glyphicon glyphicon-remove"></span>&nbsp;Supprimer</a>
                    {%  endif %}
                    <a class="btn btn-sm btn-primary" href="{{ path('contrat_markdown', {'id': contrat.id }) }}">Visualiser</a>
                    {%  if (contrat.isEnAttenteAcceptation()) %}
                        <a href="{{ path('contrat_acceptation', {'id': contrat.getId()}) }}" class="btn btn-sm btn-warning"><i class="mdi mdi-check-circle"></i>&nbsp;Accepter / Modifier le contrat</a>
                    {% else %}
                        <a href="{{ path('contrat_modification', {'id': contrat.getId()}) }}" class="btn btn-sm btn-warning"><span aria-hidden="true" class="glyphicon glyphicon-pencil"></span>&nbsp;Modifier le contrat</a>
                    {% endif %}

                </div>
            </div>
        {% else %}
            <div class="col-xs-4 text-right" style="padding-top: 30px; ">
                <div class="btn-group">
                {%  if (contrat.isReconductible) %}
                    <a href="{{ path('contrat_reconduction', {'id': contrat.getId()}) }}" class="btn btn-sm btn-default" onclick="return confirm('Êtes-vous sûre de vouloir reconduire le contrat n° '+{{ contrat.numeroArchive }}+'?');">Reconduire</a>
                {% endif %}
                {%  if (contrat.isAnnulable()) %}
                    <a href="{{ path('contrat_annulation', {'id': contrat.getId()}) }}" class="btn btn-sm btn-danger" onclick="return confirm('Êtes-vous sûre de vouloir annuler le contrat n° '+{{ contrat.numeroArchive }}+'?');">Annuler</a>
                {%  endif %}
                <a class="btn btn-sm btn-primary" href="{{ path('contrat_markdown', {'id': contrat.id }) }}">Visualiser</a>
                <a href="{{ path('contrat_acceptation', {'id': contrat.getId()}) }}" class="btn btn-sm btn-warning">Modification partielle</a>
                </div>
            </div>
        {% endif %}
    </div>
    {{ include('contrat/contrat.html.twig', { 'contrat': contrat }) }}

{% endblock %}
